<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <title>G√∂n√ºl Rahatlƒ±ƒüƒ± - √áƒ±kƒ±≈ü Kontrol√º</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#0b1220" id="themeColorMeta" />

  <!-- Font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      /* =========================
         SERENITY DARK (default)
         Ama√ß: g√ºven, sakinlik, ‚Äútamamdƒ±r‚Äù
         ========================= */
      --bg-body: #070b12;
      --bg-card: rgba(11, 18, 32, 0.92);

      --glow-1: rgba(34, 197, 94, 0.16);
      --glow-2: rgba(20, 184, 166, 0.14);
      --glow-3: rgba(56, 189, 248, 0.10);

      --surface-1: rgba(255,255,255,0.03);
      --surface-2: rgba(255,255,255,0.06);
      --surface-3: rgba(255,255,255,0.08);

      --border-card: rgba(148, 163, 184, 0.35);
      --border-soft: rgba(148, 163, 184, 0.25);

      --accent: #22c55e;           /* g√ºven ye≈üili */
      --accent-2: #14b8a6;         /* sakin teal */
      --accent-3: #38bdf8;         /* hafif mavi */
      --accent-soft: rgba(34, 197, 94, 0.12);

      --text-main: #f1f5f9;
      --text-muted: #b6c2d1;
      --text-soft: #93a4b8;

      --danger: #fb7185;
      --success: #22c55e;

      --shadow-main: 0 18px 50px rgba(0,0,0,0.45);
      --shadow-strong: 0 26px 80px rgba(0,0,0,0.55);

      --radius-card: 22px;
      --radius-pill: 999px;
      --radius-soft: 12px;

      --blur: 18px;
    }

    /* =========================
       SERENITY LIGHT
       ========================= */
    body.theme-light{
      --bg-body: #f6f8f7;
      --bg-card: rgba(255, 255, 255, 0.98);

      --glow-1: rgba(34, 197, 94, 0.12);
      --glow-2: rgba(20, 184, 166, 0.10);
      --glow-3: rgba(56, 189, 248, 0.08);

      --surface-1: rgba(2, 6, 23, 0.02);
      --surface-2: rgba(2, 6, 23, 0.04);
      --surface-3: rgba(2, 6, 23, 0.06);

      --border-card: rgba(148, 163, 184, 0.45);
      --border-soft: rgba(148, 163, 184, 0.35);

      --accent: #16a34a;
      --accent-2: #0f766e;
      --accent-3: #0284c7;
      --accent-soft: rgba(22, 163, 74, 0.10);

      --text-main: #0b1220;
      --text-muted: #425466;
      --text-soft: #6b7280;

      --danger: #e11d48;
      --success: #16a34a;

      --shadow-main: 0 14px 40px rgba(2, 6, 23, 0.08);
      --shadow-strong: 0 22px 60px rgba(2, 6, 23, 0.12);
    }

    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%}

    body{
      font-family:"Inter", system-ui, -apple-system, "Segoe UI", sans-serif;
      min-height:100svh;
      color:var(--text-main);

      /* Sakin nefes alan arka plan */
      background:
        radial-gradient(1200px 800px at 10% -10%, var(--glow-2), transparent 60%),
        radial-gradient(1000px 700px at 100% 0%, var(--glow-3), transparent 60%),
        radial-gradient(900px 900px at 50% 120%, var(--glow-1), transparent 60%),
        linear-gradient(160deg, var(--bg-body), var(--bg-body));
      background-color: var(--bg-body);

      display:flex;
      justify-content:center;
      align-items:flex-start;

      padding:
        calc(10px + env(safe-area-inset-top))
        14px
        calc(16px + env(safe-area-inset-bottom));

      -webkit-font-smoothing: antialiased;
      position: relative;
      overflow-x: hidden;
    }

    /* ‚Äúbreathing‚Äù hissi */
    body::after{
      content:"";
      position: fixed;
      inset: -10%;
      background:
        radial-gradient(circle at 20% 20%, var(--glow-1), transparent 55%),
        radial-gradient(circle at 80% 30%, var(--glow-3), transparent 55%),
        radial-gradient(circle at 50% 80%, var(--glow-2), transparent 60%);
      opacity: 0.6;
      filter: blur(60px);
      animation: breathe 10s ease-in-out infinite;
      pointer-events: none;
      z-index: 0;
    }

    @keyframes breathe{
      0%,100%{transform: scale(1) translateY(0)}
      50%{transform: scale(1.05) translateY(-0.6%)}
    }

    .shell{
      width:100%;
      max-width: 520px;
      z-index: 1;
      animation: shellIn .55s cubic-bezier(.2,.85,.2,1) forwards;
      opacity:0;
      transform: translateY(14px) scale(.985);
    }
    @keyframes shellIn{
      to{opacity:1;transform: translateY(0) scale(1)}
    }

    /* =========================
       TOP BAR
       ========================= */
    .brand{
      display:flex;
      align-items:center;
      justify-content: space-between;
      gap:10px;
      margin-bottom: 10px;
      flex-wrap: wrap;
    }

    .brand-pill{
      display:flex;
      align-items:center;
      gap:10px;
      padding: 8px 14px;
      border-radius: var(--radius-pill);
      background: linear-gradient(135deg, var(--surface-2), var(--surface-1));
      border:1px solid var(--border-card);
      backdrop-filter: blur(var(--blur));
      box-shadow: var(--shadow-main);
    }

    .logo-mark{
      width:30px;height:30px;border-radius:999px;
      background:
        radial-gradient(circle at 30% 20%, rgba(255,255,255,.35), transparent 55%),
        conic-gradient(from 200deg, var(--accent), var(--accent-2), var(--accent-3), var(--accent));
      display:flex;align-items:center;justify-content:center;
      box-shadow: 0 10px 22px rgba(0,0,0,.35);
      position: relative;
      overflow: hidden;
    }

    .logo-icon{
      font-size: 1.05rem;
      color: white;
      text-shadow: 0 2px 6px rgba(0,0,0,.35);
      animation: pulse 2.6s ease-in-out infinite;
    }
    @keyframes pulse{
      0%,100%{transform: scale(1); opacity: 1}
      50%{transform: scale(1.06); opacity: .95}
    }

    .logo-text{
      display:flex;flex-direction:column;gap:2px;
    }
    .logo-name{
      font-size:.88rem;font-weight:700;letter-spacing:.06em;text-transform: uppercase;
    }
    .logo-tag{
      font-size:.7rem;color: var(--text-soft);
    }

    .theme-toggle{
      border-radius: var(--radius-pill);
      border:1px solid var(--border-soft);
      background: linear-gradient(135deg, var(--surface-2), var(--surface-1));
      padding: 6px 11px;
      font-size: .78rem;
      color: var(--text-soft);
      display:inline-flex;
      align-items:center;
      gap: 7px;
      cursor:pointer;
      backdrop-filter: blur(var(--blur));
      box-shadow: var(--shadow-main);
      transition: transform .08s ease, border-color .18s ease, box-shadow .18s ease, background .18s ease;
      margin-left: auto;
    }
    .theme-toggle:hover{
      border-color: var(--accent-2);
      transform: translateY(-1px);
      box-shadow: var(--shadow-strong);
    }
    .theme-toggle:active{
      transform: translateY(1px) scale(.98);
    }
    .theme-toggle .icon{font-size:1rem}

    /* =========================
       CARD
       ========================= */
    .card{
      position: relative;
      background:
        linear-gradient(135deg, var(--surface-2), transparent 25%),
        linear-gradient(225deg, var(--surface-1), transparent 30%),
        var(--bg-card);
      border-radius: var(--radius-card);
      border:1px solid var(--border-card);
      padding: 18px 16px 18px;
      box-shadow: var(--shadow-strong);
      overflow: hidden;
    }

    .card::before{
      content:"";
      position:absolute; inset:-50px;
      background:
        radial-gradient(circle at 0% 0%, var(--glow-3), transparent 55%),
        radial-gradient(circle at 100% 0%, var(--glow-2), transparent 55%),
        radial-gradient(circle at 50% 120%, var(--glow-1), transparent 60%);
      opacity:.55;
      pointer-events: none;
    }

    .card-inner{position: relative; z-index: 2}

    .card-header{
      display:flex;
      align-items:flex-start;
      justify-content: space-between;
      gap: 12px;
      margin-bottom: 12px;
    }

    .title-wrap{display:flex;flex-direction:column;gap:6px}

    .micro-badge{
      display:inline-flex;
      align-items:center;
      gap:6px;
      width: fit-content;
      padding: 3px 9px;
      border-radius: 999px;
      background: var(--accent-soft);
      border: 1px solid rgba(34,197,94,.35);
      font-size:.7rem;
      color: var(--accent);
    }
    .micro-dot{
      width: 6px;height:6px;border-radius:999px;
      background: var(--accent);
      box-shadow: 0 0 0 4px rgba(34,197,94,.18);
    }

    .title{
      font-size: 1.28rem;
      font-weight: 700;
      display:flex;align-items:center;gap:8px;
      letter-spacing:.01em;
    }
    .title .icon{
      font-size: 1.35rem;
      opacity:.9;
      filter: drop-shadow(0 6px 14px rgba(0,0,0,.25));
      animation: floaty 3.2s ease-in-out infinite;
    }
    @keyframes floaty{
      0%,100%{transform: translateY(0)}
      50%{transform: translateY(-2px)}
    }

    .subtitle{
      font-size: .84rem;
      color: var(--text-soft);
      max-width: 300px;
      line-height: 1.35;
    }
    .subtitle strong{
      color: var(--accent-3);
      font-weight: 600;
    }

    .badge-timestamp{
      min-width: 140px;
      text-align:right;
      font-size:.75rem;
      color: var(--text-muted);
    }
    .badge-timestamp strong{
      color: var(--text-main);
      font-weight: 700;
    }

    /* =========================
       NAV
       ========================= */
    .nav-tabs{
      display:inline-flex;
      padding: 4px;
      border-radius: 999px;
      background: linear-gradient(135deg, var(--surface-2), var(--surface-1));
      border:1px solid var(--border-soft);
      gap: 4px;
      box-shadow: var(--shadow-main);
      margin-bottom: 10px;
    }

    .nav-tab{
      border:none;
      background: transparent;
      padding: 6px 12px;
      border-radius: 999px;
      font-size:.8rem;
      color: var(--text-soft);
      display:inline-flex;
      align-items:center;
      gap: 6px;
      cursor:pointer;
      transition: background .16s ease, color .16s ease, transform .08s ease, box-shadow .16s ease;
    }
    .nav-tab.active{
      background:
        linear-gradient(135deg, rgba(34,197,94,.14), rgba(20,184,166,.12));
      color: var(--text-main);
      box-shadow: inset 0 0 0 1px rgba(34,197,94,.18);
    }
    .nav-tab:active{transform: translateY(1px)}

    .section-label{
      font-size: .72rem;
      letter-spacing:.09em;
      text-transform: uppercase;
      color: var(--text-soft);
      margin: 6px 0 6px;
    }

    .view{display:none; animation: viewIn .22s ease-out}
    .view.active{display:block}
    @keyframes viewIn{
      from{opacity:0; transform: translateY(4px)}
      to{opacity:1; transform: translateY(0)}
    }

    /* =========================
       CHECKLIST
       ========================= */
    .checklist{display:flex;flex-direction:column;gap:8px;margin-bottom: 10px}

    .item{
      display:flex;
      align-items:flex-start;
      gap: 10px;
      padding: 11px 12px;
      border-radius: var(--radius-soft);
      background:
        linear-gradient(135deg, var(--surface-2), transparent 35%),
        var(--surface-1);
      border:1px solid var(--border-soft);
      cursor:pointer;
      transition: border-color .18s ease, background .18s ease, box-shadow .18s ease, transform .08s ease;
    }

    .item:hover{
      border-color: rgba(34,197,94,.45);
      background:
        linear-gradient(135deg, rgba(34,197,94,.08), transparent 40%),
        var(--surface-2);
      box-shadow: 0 12px 26px rgba(0,0,0,.18);
      transform: translateY(-1px);
    }

    .item.checked{
      border-color: rgba(34,197,94,.85);
      background:
        linear-gradient(135deg, rgba(34,197,94,.18), transparent 40%),
        var(--surface-3);
      box-shadow: 0 14px 30px rgba(34,197,94,.18);
    }

    .item input{
      appearance:none;
      width: 20px; height:20px;
      border-radius: 7px;
      border:1px solid rgba(148,163,184,.5);
      background: transparent;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      margin-top: 1px;
      flex-shrink:0;
      cursor:pointer;
      transition: border-color .16s ease, background .16s ease, transform .08s ease, box-shadow .16s ease;
      position: relative;
    }

    .item input::after{
      content:"";
      width: 9px; height: 5px;
      border-left: 2px solid white;
      border-bottom: 2px solid white;
      transform: rotate(-45deg) scale(0.6);
      opacity: 0;
      transition: opacity .14s ease, transform .14s ease;
    }

    .item input:checked{
      border-color: var(--success);
      background: linear-gradient(135deg, var(--accent), var(--accent-2));
      box-shadow: 0 0 0 2px rgba(34,197,94,.18);
      transform: scale(.98);
    }

    .item input:checked::after{
      opacity: 1;
      transform: rotate(-45deg) scale(1);
    }

    .item-body{
      display:flex;
      flex-direction:column;
      gap: 3px;
      min-width: 0;
      flex: 1;
    }

    .item ‡§∂‡•Ä‡§∞‡•ç‡§∑? no; remove. 
    .item-title-row{
      display:flex;
      align-items:center;
      gap: 8px;
      flex-wrap: wrap;
    }

    .label{
      font-size: .95rem;
      font-weight: 600;
      color: var(--text-main);
      line-height: 1.25;
    }

    .hint{
      font-size: .78rem;
      color: var(--text-muted);
    }

    .critical-pill{
      font-size: .65rem;
      padding: 2px 6px;
      border-radius: 999px;
      border: 1px solid rgba(34,197,94,.45);
      background: rgba(34,197,94,.10);
      color: var(--accent);
      font-weight: 600;
      letter-spacing: .02em;
    }

    /* =========================
       NOTE
       ========================= */
    .note-area{margin-bottom: 10px}

    .note-label{
      display:flex;align-items:center;gap:6px;
      font-size: .8rem;color: var(--text-soft);
      margin-bottom: 5px;
    }

    textarea{
      width:100%;
      border-radius: var(--radius-soft);
      border:1px solid var(--border-soft);
      background: linear-gradient(135deg, var(--surface-2), var(--surface-1));
      color: var(--text-main);
      padding: 9px 10px;
      font-size: .86rem;
      min-height: 56px;
      resize: none;
      outline: none;
      transition: border-color .16s ease, box-shadow .16s ease, background .16s ease;
    }

    textarea::placeholder{color: var(--text-soft)}
    textarea:focus{
      border-color: rgba(20,184,166,.55);
      box-shadow: 0 0 0 2px rgba(20,184,166,.14);
      background: linear-gradient(135deg, var(--surface-3), var(--surface-1));
    }

    /* =========================
       PROGRESS + ACTIONS
       ========================= */
    .progress-row{
      display:flex;align-items:center;justify-content:space-between;
      gap: 10px; margin-bottom: 8px;
    }

    .progress-bar{
      flex:1; height: 8px;
      border-radius: 999px;
      background: var(--surface-1);
      border:1px solid var(--border-soft);
      overflow:hidden;
    }

    .progress-inner{
      height:100%; width:0%;
      border-radius:999px;
      background: linear-gradient(90deg, var(--accent), var(--accent-2));
      transition: width .22s cubic-bezier(.2,.8,.25,1);
    }

    .progress-inner.full{
      animation: progressPulse .5s ease-out;
    }
    @keyframes progressPulse{
      0%{transform: scaleX(1)}
      50%{transform: scaleX(1.03)}
      100%{transform: scaleX(1)}
    }

    .progress-text{
      font-size:.78rem;color: var(--text-soft);white-space: nowrap;
    }

    .actions-row{
      display:flex;align-items:center;justify-content:space-between;
      gap: 10px; margin-bottom: 10px;
    }

    .primary-btn{
      flex:1;
      border:none;
      border-radius: var(--radius-pill);
      background:
        linear-gradient(135deg, var(--accent), var(--accent-2));
      color: white;
      font-weight: 700;
      font-size: .9rem;
      padding: 10px 14px;
      cursor:pointer;
      display:inline-flex;align-items:center;justify-content:center;gap: 7px;
      box-shadow: 0 14px 30px rgba(34,197,94,.22);
      transition: transform .08s ease, filter .12s ease, box-shadow .12s ease;
    }

    .primary-btn:hover{
      filter: brightness(1.03);
      transform: translateY(-1px);
      box-shadow: 0 18px 40px rgba(34,197,94,.28);
    }
    .primary-btn:active{
      transform: translateY(1px) scale(.99);
    }

    .tiny-meta{
      font-size:.72rem;color: var(--text-soft);text-align:right;
    }
    .tiny-meta strong{color: var(--text-main); font-weight:700}

    /* =========================
       LAST LOG + STATS
       ========================= */
    .last-log{
      margin-top: 8px;
      padding: 10px 10px 11px;
      border-radius: var(--radius-soft);
      background:
        linear-gradient(135deg, var(--surface-2), var(--surface-1));
      border:1px solid var(--border-soft);
    }

    .last-log-header{
      display:flex;align-items:center;justify-content:space-between;
      gap: 8px; margin-bottom: 6px;
    }

    .last-log-title{
      font-size:.86rem;font-weight:700;
      display:flex;align-items:center;gap: 6px;
    }

    .last-log-time{
      font-size:.76rem;color: var(--text-muted);text-align:right;
    }

    .chips-row{
      display:flex;flex-wrap: wrap;gap: 4px;margin-bottom: 4px;
    }

    .chip{
      font-size:.75rem;
      padding: 3px 7px;border-radius:999px;
      border:1px solid var(--border-soft);
      background: var(--surface-1);
      display:inline-flex;align-items:center;gap: 4px;
      color: var(--text-muted);
    }
    .chip .dot{
      width:7px;height:7px;border-radius:999px;
      background: rgba(148,163,184,.7);
    }
    .chip.good .dot{background: var(--success)}
    .chip.bad .dot{background: var(--danger)}

    .last-log-note{
      margin-top: 4px;font-size:.8rem;color: var(--text-muted);
    }
    .last-log-empty{
      font-size:.8rem;color: var(--text-soft);
    }

    .stats{
      margin-top: 8px;
      font-size:.78rem;color: var(--text-soft);
      display:flex;flex-wrap: wrap;gap: 8px;
    }
    .stats strong{color: var(--text-main)}

    /* =========================
       SETTINGS
       ========================= */
    .settings-info{
      font-size:.8rem;color: var(--text-soft);
      margin-bottom: 8px;
    }

    .settings-list{
      display:flex;flex-direction:column;gap: 6px;
      margin-bottom: 8px;
      max-height: 220px; overflow-y:auto; padding-right: 2px;
    }

    .settings-row{
      padding: 8px;
      border-radius: var(--radius-soft);
      background: linear-gradient(135deg, var(--surface-2), var(--surface-1));
      border:1px solid var(--border-soft);
      display:grid; grid-template-columns: minmax(0,1fr) auto;
      gap: 8px; align-items:center;
    }

    .settings-row-main{
      display:flex;flex-direction:column;gap: 6px;
    }

    .settings-row-main input{
      width:100%;
      border-radius: 9px;
      border:1px solid var(--border-soft);
      background: var(--surface-1);
      color: var(--text-main);
      padding: 6px 8px;
      font-size:.8rem;
      outline:none;
      transition: border-color .16s ease, box-shadow .16s ease;
    }
    .settings-row-main input:focus{
      border-color: rgba(20,184,166,.55);
      box-shadow: 0 0 0 2px rgba(20,184,166,.12);
    }

    .settings-meta{
      display:flex;flex-direction:column;gap: 6px;
      align-items:flex-end;
    }

    .toggle-label{
      display:inline-flex;align-items:center;gap: 5px;
      font-size:.75rem;color: var(--text-muted);
      cursor:pointer;
    }

    .delete-btn{
      border-radius: 999px;
      border:none;
      background: rgba(239, 68, 68, 0.12);
      color: var(--danger);
      font-size:.74rem;
      padding: 4px 8px;
      cursor:pointer;
      display:inline-flex;align-items:center;gap: 4px;
      transition: background .15s ease, transform .07s ease;
    }
    .delete-btn:hover{background: rgba(239, 68, 68, 0.2); transform: translateY(-1px)}
    .delete-btn:active{transform: translateY(1px)}

    .settings-actions{
      display:flex;align-items:center;justify-content:space-between;gap: 8px;
      margin-top: 4px;
    }

    .secondary-btn{
      border-radius: var(--radius-pill);
      border:1px solid var(--border-soft);
      background: linear-gradient(135deg, var(--surface-2), var(--surface-1));
      color: var(--text-main);
      font-size:.8rem;
      padding: 7px 11px;
      cursor:pointer;
      display:inline-flex;align-items:center;gap: 6px;
      transition: transform .07s ease, box-shadow .14s ease, border-color .14s ease;
      box-shadow: var(--shadow-main);
    }
    .secondary-btn:hover{
      transform: translateY(-1px);
      border-color: rgba(20,184,166,.45);
      box-shadow: var(--shadow-strong);
    }
    .secondary-btn:active{transform: translateY(1px)}

    .settings-hint{
      font-size:.74rem;color: var(--text-soft);
      text-align:right;margin-top: 2px;
    }

    /* =========================
       TOAST
       ========================= */
    .toast{
      position: fixed;
      left: 50%;
      bottom: calc(14px + env(safe-area-inset-bottom));
      transform: translateX(-50%) translateY(16px);
      background: var(--bg-card);
      color: var(--text-main);
      padding: 8px 14px;
      border-radius: 999px;
      border:1px solid var(--border-soft);
      font-size:.8rem;
      opacity:0; pointer-events:none;
      transition: opacity .25s ease, transform .25s ease;
      box-shadow: var(--shadow-strong);
      z-index: 50;
      backdrop-filter: blur(var(--blur));
    }
    .toast.show{
      opacity:1; transform: translateX(-50%) translateY(0);
    }

    /* =========================
       RESPONSIVE
       ========================= */
    @media (max-width: 480px){
      .shell{max-width: 100%}
      .subtitle{max-width: none}
      .badge-timestamp{min-width: 0}
      .card{padding: 16px 13px 16px}
      .brand{gap: 8px}
      .theme-toggle{padding: 6px 10px}
    }
  </style>
</head>
<body class="theme-dark">
  <div class="shell">
    <div class="brand">
      <div class="brand-pill">
        <div class="logo-mark"><span class="logo-icon">‚úì</span></div>
        <div class="logo-text">
          <div class="logo-name">G√∂n√ºl Rahatlƒ±ƒüƒ±</div>
          <div class="logo-tag">√áƒ±kƒ±≈ü kontrol√º</div>
        </div>
      </div>

      <button id="themeToggle" class="theme-toggle" type="button">
        <span class="icon">üåô</span>
        <span class="icon">‚òÄÔ∏è</span>
        <span class="label">Koyu</span>
      </button>
    </div>

    <div class="card">
      <div class="card-inner">
        <div class="card-header">
          <div class="title-wrap">
            <span class="micro-badge">
              <span class="micro-dot"></span>
              <span>Bug√ºn √ßƒ±kmadan 10 saniye</span>
            </span>
            <div class="title">
              <span class="icon">üö™</span>
              <span>√áƒ±kƒ±≈ü Kontrol√º</span>
            </div>
            <p class="subtitle">
              <strong>√út√º, ocak, kapƒ±, pencere‚Ä¶</strong>
              Evden √ßƒ±kmadan mini bir tur at; g√ºn boyu ‚Äúgeri d√∂nsem mi?‚Äù
              sorusu kafandan silinsin.
            </p>
          </div>
          <div class="badge-timestamp">
            <div>Bug√ºn</div>
            <strong id="todayLabel">--</strong>
          </div>
        </div>

        <div class="nav-tabs">
          <button class="nav-tab active" data-view="view-quick">
            <span class="emoji">‚ö°</span><span>Hƒ±zlƒ± √ßƒ±kƒ±≈ü</span>
          </button>
          <button class="nav-tab" data-view="view-settings">
            <span class="emoji">üß©</span><span>Listeyi d√ºzenle</span>
          </button>
        </div>

        <!-- Hƒ±zlƒ± √áƒ±kƒ±≈ü -->
        <div id="view-quick" class="view active">
          <div class="section-label">Kontrol listesi</div>
          <div id="checklist" class="checklist"></div>

          <div class="note-area">
            <div class="note-label">
              <span class="emoji">üìù</span>
              <span>Ek not (isteƒüe baƒülƒ±)</span>
            </div>
            <textarea id="note" placeholder="√ñrn: Bug√ºn √ºt√º hi√ß kullanƒ±lmadƒ±, sadece ocaƒüƒ± kontrol ettim."></textarea>
          </div>

          <div class="progress-row">
            <div class="progress-bar">
              <div id="progressInner" class="progress-inner"></div>
            </div>
            <div id="progressText" class="progress-text">0 / 0 tamam</div>
          </div>

          <div class="actions-row">
            <button type="button" id="saveBtn" class="primary-btn">
              <span class="emoji">‚úÖ</span>
              <span>Kaydƒ± Kaydet</span>
            </button>
            <div class="tiny-meta">
              <div><strong id="totalLogsTop">0</strong> kayƒ±t</div>
              <div style="opacity:.75;">Bu cihazda</div>
            </div>
          </div>

          <div id="lastLog" class="last-log"></div>
          <div id="stats" class="stats"></div>
        </div>

        <!-- Listeyi D√ºzenle -->
        <div id="view-settings" class="view">
          <div class="section-label">Liste ayarlarƒ±</div>
          <div class="settings-info">
            Liste ve kayƒ±tlar yalnƒ±zca bu cihazda tutulur. Aynƒ± QR‚Äôƒ± y√ºz ki≈üi de kullansa,
            herkesin ‚Äúg√∂n√ºl rahatlƒ±ƒüƒ±‚Äù g√ºnl√ºƒü√º kendine √∂zeldir.
          </div>

          <div id="settingsList" class="settings-list"></div>

          <div class="settings-actions">
            <button id="addItemBtn" class="secondary-btn" type="button">
              <span class="emoji">‚ûï</span>
              <span>Yeni madde ekle</span>
            </button>
            <button id="resetBtn" class="secondary-btn" type="button">
              <span class="emoji">‚ôªÔ∏è</span>
              <span>Varsayƒ±lanlara d√∂n</span>
            </button>
          </div>
          <div class="settings-hint">
            √ñrnek: ‚ÄúOcak kapalƒ± mƒ±?‚Äù, ‚ÄúKapƒ± kilitli mi?‚Äù, ‚Äú√á√∂p√º √ßƒ±kardƒ±m mƒ±?‚Äù gibi.
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Toast -->
  <div id="toast" class="toast"></div>

  <script>
    // Mevcut verileri kaybetmemek i√ßin aynƒ± key'ler
    const LOGS_KEY = "exitChecklistLogs_v7";
    const CONFIG_KEY = "exitChecklistConfig_v5";
    const THEME_KEY = "gr_theme";
    const metaTheme = document.getElementById("themeColorMeta");

    const defaultConfig = [
      { id: "iron", label: "√út√º fi≈üten √ßekildi", hint: "Kabloyu ger√ßekten prizden √ßektiƒüine emin ol.", critical: true },
      { id: "stove", label: "Ocak tamamen kapalƒ±", hint: "T√ºm d√ºƒümeler 0 konumunda mƒ±?", critical: true },
      { id: "windows", label: "Pencereler kapalƒ±", hint: "Oda + balkon pencerelerini bir tur kontrol et.", critical: false },
      { id: "door", label: "Kapƒ± kilitli", hint: "Kapƒ±yƒ± √ßekip kilidi √ßevirdin mi?", critical: true },
      { id: "pet", label: "Hayvan / bitki su-mama", hint: "Kedi, k√∂pek, ku≈ü veya bitki i√ßin su/mamayƒ± kontrol et.", critical: false },
    ];

    let CONFIG = [];

    const checklistContainer = document.getElementById("checklist");
    const noteInput = document.getElementById("note");
    const lastLogDiv = document.getElementById("lastLog");
    const saveBtn = document.getElementById("saveBtn");
    const totalLogsTopEl = document.getElementById("totalLogsTop");
    const todayLabel = document.getElementById("todayLabel");
    const progressInner = document.getElementById("progressInner");
    const progressText = document.getElementById("progressText");
    const statsEl = document.getElementById("stats");
    const settingsListEl = document.getElementById("settingsList");
    const addItemBtn = document.getElementById("addItemBtn");
    const resetBtn = document.getElementById("resetBtn");
    const navTabs = document.querySelectorAll(".nav-tab");
    const toastEl = document.getElementById("toast");
    const themeToggleBtn = document.getElementById("themeToggle");

    let toastTimeout;

    function setTheme(mode) {
      const body = document.body;
      body.classList.remove("theme-dark", "theme-light");
      if (mode === "light") {
        body.classList.add("theme-light");
        if (metaTheme) metaTheme.setAttribute("content", "#f6f8f7");
        themeToggleBtn.querySelector(".label").textContent = "Aydƒ±nlƒ±k";
      } else {
        body.classList.add("theme-dark");
        if (metaTheme) metaTheme.setAttribute("content", "#0b1220");
        themeToggleBtn.querySelector(".label").textContent = "Koyu";
      }
      try { localStorage.setItem(THEME_KEY, mode); } catch {}
    }

    function initTheme() {
      let stored = null;
      try { stored = localStorage.getItem(THEME_KEY); } catch {}
      if (stored === "light" || stored === "dark") {
        setTheme(stored);
      } else {
        const prefersLight = window.matchMedia && window.matchMedia("(prefers-color-scheme: light)").matches;
        setTheme(prefersLight ? "light" : "dark");
      }
    }

    function toggleTheme() {
      const current = document.body.classList.contains("theme-light") ? "light" : "dark";
      setTheme(current === "light" ? "dark" : "light");
    }

    function showToast(message) {
      toastEl.textContent = message;
      toastEl.classList.add("show");
      clearTimeout(toastTimeout);
      toastTimeout = setTimeout(() => toastEl.classList.remove("show"), 2200);
    }

    function updateTodayLabel() {
      const now = new Date();
      const date = now.toLocaleDateString("tr-TR", {
        day: "numeric", month: "long", year: "numeric", weekday: "long",
      });
      todayLabel.textContent = date;
    }

    function loadConfig() {
      try {
        const raw = localStorage.getItem(CONFIG_KEY);
        if (!raw) return [...defaultConfig];
        const parsed = JSON.parse(raw);
        if (!Array.isArray(parsed) || !parsed.length) return [...defaultConfig];
        return parsed.map((item, index) => ({
          id: item.id || "item-" + index,
          label: typeof item.label === "string" ? item.label : "Madde",
          hint: typeof item.hint === "string" ? item.hint : "",
          critical: !!item.critical,
        }));
      } catch {
        return [...defaultConfig];
      }
    }

    function saveConfig() {
      try { localStorage.setItem(CONFIG_KEY, JSON.stringify(CONFIG)); } catch {}
    }

    function loadLogs() {
      try {
        const raw = localStorage.getItem(LOGS_KEY);
        return raw ? JSON.parse(raw) : [];
      } catch {
        return [];
      }
    }

    function saveLogs(logs) {
      try { localStorage.setItem(LOGS_KEY, JSON.stringify(logs)); } catch {}
    }

    function updateProgress() {
      const checkboxes = checklistContainer.querySelectorAll('input[type="checkbox"]');
      const total = checkboxes.length;
      let done = 0;
      checkboxes.forEach(cb => { if (cb.checked) done++; });

      const pct = total ? Math.round((done / total) * 100) : 0;
      progressInner.style.width = pct + "%";
      progressText.textContent = total ? `${done} / ${total} tamam` : "0 / 0 tamam";

      progressInner.classList.remove("full");
      if (pct === 100 && total > 0) {
        void progressInner.offsetWidth;
        progressInner.classList.add("full");
      }
    }

    function buildChecklist() {
      checklistContainer.innerHTML = "";

      CONFIG.forEach((item, index) => {
        const row = document.createElement("div");
        row.className = "item";
        row.dataset.index = String(index);

        const checkbox = document.createElement("input");
        checkbox.type = "checkbox";
        checkbox.name = "item-" + index;

        const body = document.createElement("div");
        body.className = "item-body";

        const titleRow = document.createElement("div");
        titleRow.className = "item-title-row";

        const mainLabel = document.createElement("span");
        mainLabel.className = "label";
        mainLabel.textContent = item.label;

        titleRow.appendChild(mainLabel);

        if (item.critical) {
          const crit = document.createElement("span");
          crit.className = "critical-pill";
          crit.textContent = "Kritik";
          titleRow.appendChild(crit);
        }

        body.appendChild(titleRow);

        if (item.hint) {
          const hintEl = document.createElement("span");
          hintEl.className = "hint";
          hintEl.textContent = item.hint;
          body.appendChild(hintEl);
        }

        row.appendChild(checkbox);
        row.appendChild(body);
        checklistContainer.appendChild(row);

        checkbox.addEventListener("change", () => {
          row.classList.toggle("checked", checkbox.checked);
          updateProgress();
        });

        // ‚úÖ FIX: Yazƒ±ya/bo≈üluƒüa tƒ±klayƒ±nca da toggle
        // input'a tƒ±klanƒ±nca √ßift toggle olmamasƒ± i√ßin kontrol
        row.addEventListener("click", (e) => {
          if (e.target === checkbox) return;
          checkbox.checked = !checkbox.checked;
          row.classList.toggle("checked", checkbox.checked);
          updateProgress();
        });
      });

      updateProgress();
    }

    function computeStats(logs) {
      const totalLogs = logs.length;
      const datesSet = new Set(
        logs.map(l => {
          try { return l.time.slice(0, 10); } catch { return ""; }
        }).filter(Boolean)
      );
      const distinctDays = datesSet.size;

      let streak = 0;
      if (distinctDays > 0) {
        let cursor = new Date();
        cursor.setHours(0, 0, 0, 0);
        while (true) {
          const iso = cursor.toISOString().slice(0, 10);
          if (datesSet.has(iso)) {
            streak++;
            cursor.setDate(cursor.getDate() - 1);
          } else break;
        }
      }

      return { totalLogs, distinctDays, streak };
    }

    function renderLastLogAndStats() {
      const logs = loadLogs();
      const { totalLogs, distinctDays, streak } = computeStats(logs);
      totalLogsTopEl.textContent = totalLogs.toString();

      if (!logs.length) {
        lastLogDiv.innerHTML = `
          <div class="last-log-header">
            <div class="last-log-title">
              <span class="emoji">üïí</span>
              <span>Hen√ºz kayƒ±t yok</span>
            </div>
          </div>
          <div class="last-log-empty">
            ƒ∞lk kez kullanƒ±yorsan, √ßƒ±kmadan maddeleri i≈üaretle ve ‚ÄúKaydƒ± Kaydet‚Äùe tƒ±kla.
          </div>
        `;
        statsEl.innerHTML = "";
        return;
      }

      const last = logs[logs.length - 1];
      const dt = new Date(last.time);
      const dateStr = dt.toLocaleString("tr-TR", {
        day: "numeric", month: "short", year: "numeric", hour: "2-digit", minute: "2-digit",
      });

      const chipsHtml = last.answers.map(ans => {
        const ok = ans.checked;
        const critical = !!ans.critical;
        let cls = "chip";
        if (critical) cls += ok ? " good" : " bad";

        const labelShort = ans.label.length > 26 ? ans.label.slice(0, 26) + "‚Ä¶" : ans.label;
        const statusText = critical ? (ok ? "Kritik ¬∑ Tamam" : "Kritik ¬∑ Eksik")
                                   : (ok ? "Opsiyonel ¬∑ Tamam" : "Opsiyonel");
        return `
          <div class="${cls}">
            <span class="dot"></span>
            <span>${labelShort}</span>
            <span style="opacity:0.7;">¬∑ ${statusText}</span>
          </div>
        `;
      }).join("");

      const noteHtml = last.note
        ? `<div class="last-log-note"><strong>Not:</strong> ${last.note}</div>`
        : "";

      lastLogDiv.innerHTML = `
        <div class="last-log-header">
          <div class="last-log-title">
            <span class="emoji">üìå</span>
            <span>Son √ßƒ±kƒ±≈ü kaydƒ±n</span>
          </div>
          <div class="last-log-time">${dateStr}</div>
        </div>
        <div class="chips-row">${chipsHtml}</div>
        ${noteHtml}
      `;

      statsEl.innerHTML = `
        <span><strong>${totalLogs}</strong> kayƒ±t</span>
        <span><strong>${distinctDays}</strong> farklƒ± g√ºn kullandƒ±n</span>
        <span><strong>${streak}</strong> g√ºnl√ºk serin var</span>
      `;
    }

    function buildSettingsList() {
      settingsListEl.innerHTML = "";

      CONFIG.forEach((item, index) => {
        const row = document.createElement("div");
        row.className = "settings-row";

        const main = document.createElement("div");
        main.className = "settings-row-main";

        const labelInput = document.createElement("input");
        labelInput.type = "text";
        labelInput.placeholder = "Madde ba≈ülƒ±ƒüƒ± (√∂rn. Kapƒ± kilitli mi?)";
        labelInput.value = item.label;

        const hintInput = document.createElement("input");
        hintInput.type = "text";
        hintInput.placeholder = "ƒ∞pucu (opsiyonel)";
        hintInput.value = item.hint || "";

        main.appendChild(labelInput);
        main.appendChild(hintInput);

        const meta = document.createElement("div");
        meta.className = "settings-meta";

        const toggleLabel = document.createElement("label");
        toggleLabel.className = "toggle-label";

        const critCheckbox = document.createElement("input");
        critCheckbox.type = "checkbox";
        critCheckbox.checked = !!item.critical;

        const toggleText = document.createElement("span");
        toggleText.textContent = "Kritik madde";

        toggleLabel.appendChild(critCheckbox);
        toggleLabel.appendChild(toggleText);

        const deleteBtn = document.createElement("button");
        deleteBtn.type = "button";
        deleteBtn.className = "delete-btn";
        deleteBtn.innerHTML = `<span class="emoji">üóëÔ∏è</span><span>Sil</span>`;

        meta.appendChild(toggleLabel);
        meta.appendChild(deleteBtn);

        row.appendChild(main);
        row.appendChild(meta);
        settingsListEl.appendChild(row);

        labelInput.addEventListener("input", (e) => {
          CONFIG[index].label = e.target.value || "Madde";
          saveConfig();
          buildChecklist();
        });

        hintInput.addEventListener("input", (e) => {
          CONFIG[index].hint = e.target.value;
          saveConfig();
          buildChecklist();
        });

        critCheckbox.addEventListener("change", (e) => {
          CONFIG[index].critical = !!e.target.checked;
          saveConfig();
          buildChecklist();
        });

        deleteBtn.addEventListener("click", () => {
          if (CONFIG.length <= 1) {
            showToast("En az bir madde kalmalƒ±.");
            return;
          }
          CONFIG.splice(index, 1);
          saveConfig();
          buildSettingsList();
          buildChecklist();
        });
      });
    }

    function addNewItem() {
      CONFIG.push({
        id: "item-" + Date.now(),
        label: "Yeni madde",
        hint: "",
        critical: false,
      });
      saveConfig();
      buildSettingsList();
      buildChecklist();
    }

    function resetToDefault() {
      if (!confirm("Varsayƒ±lan listeye d√∂nmek istiyor musun? Mevcut listen bu cihazda sƒ±fƒ±rlanacak.")) return;
      CONFIG = [...defaultConfig];
      saveConfig();
      buildSettingsList();
      buildChecklist();
      showToast("Liste varsayƒ±lanlara d√∂nd√º.");
    }

    saveBtn.addEventListener("click", () => {
      const logs = loadLogs();
      const answers = [];

      const rows = checklistContainer.querySelectorAll(".item");
      rows.forEach((row) => {
        const idx = Number(row.dataset.index);
        const cb = row.querySelector('input[type="checkbox"]');
        answers.push({
          label: CONFIG[idx]?.label || "Madde",
          checked: !!cb?.checked,
          critical: !!CONFIG[idx]?.critical,
        });
      });

      const note = noteInput.value.trim();

      logs.push({
        time: new Date().toISOString(),
        answers,
        note,
      });

      saveLogs(logs);
      renderLastLogAndStats();

      rows.forEach((row) => {
        const cb = row.querySelector('input[type="checkbox"]');
        if (cb) cb.checked = false;
        row.classList.remove("checked");
      });
      noteInput.value = "";
      updateProgress();

      if (window.navigator && window.navigator.vibrate) {
        window.navigator.vibrate(25);
      }

      showToast("Kayƒ±t alƒ±ndƒ±. G√ºle g√ºle! üòå");
    });

    addItemBtn.addEventListener("click", addNewItem);
    resetBtn.addEventListener("click", resetToDefault);

    navTabs.forEach((btn) => {
      btn.addEventListener("click", () => {
        navTabs.forEach((b) => b.classList.remove("active"));
        btn.classList.add("active");

        const viewId = btn.getAttribute("data-view");
        document.querySelectorAll(".view").forEach((v) => v.classList.remove("active"));
        const target = document.getElementById(viewId);
        if (target) target.classList.add("active");
      });
    });

    themeToggleBtn.addEventListener("click", toggleTheme);

    (function init() {
      initTheme();
      updateTodayLabel();
      CONFIG = loadConfig();
      buildChecklist();
      buildSettingsList();
      renderLastLogAndStats();
    })();
  </script>
</body>
</html>
